/**
 * vAccordion - AngularJS multi-level accordion component
 * @version v1.4.1
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";function b(b){return{restrict:"E",transclude:!0,controller:c,scope:{control:"=?",allowMultiple:"=?multiple",expandCb:"&?onexpand",collapseCb:"&?oncollapse",id:"@?"},link:function(c,d,e,f,g){function i(){a.forEach(h,function(a){if(c.control[a])throw new Error("The `"+a+"` method can not be overwritten")})}g(c.$parent.$new(),function(a,b){b.$accordion=c.internalControl,d.append(a)});var h=["toggle","expand","collapse","expandAll","collapseAll","hasExpandedPane"];if(a.isDefined(c.allowMultiple)||(c.allowMultiple=a.isDefined(e.multiple)),e.$set("role","tablist"),c.allowMultiple&&e.$set("aria-multiselectable","true"),a.isDefined(c.control)){i();var j=a.extend({},c.internalControl,c.control);c.control=c.internalControl=j}else c.control=c.internalControl;b(function(){var b=a.isDefined(f.getAccordionId())?f.getAccordionId()+":onReady":"vAccordion:onReady";c.$emit(b)},0)}}}function c(b){var c=this,d=!1;b.panes=[],b.expandCb=a.isFunction(b.expandCb)?b.expandCb:a.noop,b.collapseCb=a.isFunction(b.collapseCb)?b.collapseCb:a.noop,c.hasExpandedPane=function(){for(var c=!1,d=0,e=b.panes.length;d<e;d++){var f=b.panes[d];if(f.isExpanded){c=!0;break}}return c},c.getPaneByIndex=function(d){var e;return a.forEach(b.panes,function(b){b.$parent&&a.isDefined(b.$parent.$index)&&b.$parent.$index===d&&(e=b)}),e?e:b.panes[d]},c.getPaneIndex=function(d){var e;return a.forEach(b.panes,function(b){b.$parent&&a.isDefined(b.$parent.$index)&&b===d&&(e=b.$parent.$index)}),a.isDefined(e)?e:b.panes.indexOf(d)},c.getPaneById=function(d){var e;return a.forEach(b.panes,function(a){a.id&&a.id===d&&(e=a)}),e},c.getPaneId=function(b){return b.id},c.getAccordionId=function(){return b.id},c.disable=function(){d=!0},c.enable=function(){d=!1},c.addPane=function(d){if(!b.allowMultiple&&c.hasExpandedPane()&&d.isExpanded)throw new Error("The `multiple` attribute can't be found");b.panes.push(d),d.isExpanded&&b.expandCb({index:c.getPaneIndex(d),id:d.id,pane:d})},c.focusNext=function(){for(var c=b.panes.length,d=0;d<c;d++){var e=b.panes[d];if(e.isFocused){var f=d+1;f>b.panes.length-1&&(f=0);var g=b.panes[f];g.paneElement.find("v-pane-header")[0].focus();break}}},c.focusPrevious=function(){for(var c=b.panes.length,d=0;d<c;d++){var e=b.panes[d];if(e.isFocused){var f=d-1;f<0&&(f=b.panes.length-1);var g=b.panes[f];g.paneElement.find("v-pane-header")[0].focus();break}}},c.toggle=function(e){!d&&e&&(b.allowMultiple||c.collapseAll(e),e.isExpanded=!e.isExpanded,e.isExpanded?b.expandCb({index:c.getPaneIndex(e),id:e.id,pane:e}):b.collapseCb({index:c.getPaneIndex(e),id:e.id,pane:e}))},c.expand=function(e){!d&&e&&(b.allowMultiple||c.collapseAll(e),e.isExpanded||(e.isExpanded=!0,b.expandCb({index:c.getPaneIndex(e),id:e.id,pane:e})))},c.collapse=function(e){!d&&e&&e.isExpanded&&(e.isExpanded=!1,b.collapseCb({index:c.getPaneIndex(e),id:e.id,pane:e}))},c.expandAll=function(){if(!d){if(!b.allowMultiple)throw new Error("The `multiple` attribute can't be found");a.forEach(b.panes,function(a){c.expand(a)})}},c.collapseAll=function(f){d||a.forEach(b.panes,function(a){a!==f&&c.collapse(a)})},b.internalControl={toggle:function(d){a.isString(d)?c.toggle(c.getPaneById(d)):c.toggle(c.getPaneByIndex(d))},expand:function(d){a.isString(d)?c.expand(c.getPaneById(d)):c.expand(c.getPaneByIndex(d))},collapse:function(d){a.isString(d)?c.collapse(c.getPaneById(d)):c.collapse(c.getPaneByIndex(d))},expandAll:c.expandAll,collapseAll:c.collapseAll,hasExpandedPane:c.hasExpandedPane}}function d(){return{restrict:"E",require:"^vPane",transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(a,b,c){c.$set("role","tabpanel")}}}function e(){return{restrict:"E",require:["^vPane","^vAccordion"],transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(b,c,d,e){function i(){return!h&&void b.$apply(function(){f.toggle()})}function j(a){32===a.keyCode||13===a.keyCode?(b.$apply(function(){f.toggle()}),a.preventDefault()):39===a.keyCode?(b.$apply(function(){g.focusNext()}),a.preventDefault()):37===a.keyCode&&(b.$apply(function(){g.focusPrevious()}),a.preventDefault())}d.$set("role","tab");var f=e[0],g=e[1],h=a.isDefined(d.inactive);c[0].onfocus=function(){f.focusPane()},c[0].onblur=function(){f.blurPane()},c.bind("click",i),c.bind("keydown",j),b.$on("$destroy",function(){c.unbind("click",i),c.unbind("keydown",j),c[0].onfocus=null,c[0].onblur=null})}}}function f(b,c,d){return{restrict:"E",require:"^vAccordion",transclude:!0,controller:g,scope:{isExpanded:"=?expanded",isDisabled:"=?ngDisabled",id:"@?"},link:function(e,f,g,h,i){function o(b){b=a.isDefined(n)?n+":"+b:"vAccordion:"+b,e.$emit(b)}function p(){h.disable(),l[0].style.maxHeight="0px",k.attr({"aria-selected":"true",tabindex:"0"}),o("onExpand"),b(function(){c.addClass(f,j.expanded).then(function(){h.enable(),l[0].style.maxHeight="none",o("onExpandAnimationEnd")}),setTimeout(function(){l[0].style.maxHeight=m[0].offsetHeight+"px"},0)},0)}function q(){h.disable(),l[0].style.maxHeight=m[0].offsetHeight+"px",k.attr({"aria-selected":"false",tabindex:"-1"}),o("onCollapse"),b(function(){c.removeClass(f,j.expanded).then(function(){h.enable(),o("onCollapseAnimationEnd")}),setTimeout(function(){l[0].style.maxHeight="0px"},0)},0)}i(e.$parent.$new(),function(a,b){b.$pane=e.internalControl,e.id&&(b.$pane.id=e.id),f.append(a)}),a.isDefined(e.isExpanded)||(e.isExpanded=a.isDefined(g.expanded)),a.isDefined(g.disabled)&&(e.isDisabled=!0);var j=d.states,k=f.find("v-pane-header"),l=f.find("v-pane-content"),m=l.find("div"),n=h.getAccordionId();if(!k[0])throw new Error("The `v-pane-header` directive can't be found");if(!l[0])throw new Error("The `v-pane-content` directive can't be found");e.paneElement=f,e.paneContentElement=l,e.paneInnerElement=m,e.accordionCtrl=h,h.addPane(e),e.isExpanded?(f.addClass(j.expanded),l[0].style.maxHeight="none",k.attr({"aria-selected":"true",tabindex:"0"})):(l[0].style.maxHeight="0px",k.attr({"aria-selected":"false",tabindex:"-1"})),e.$watch("isExpanded",function(a,b){return a===b||void(a?p():q())})}}}function g(a){var b=this;b.isExpanded=function(){return a.isExpanded},b.toggle=function(){a.isAnimating||a.isDisabled||a.accordionCtrl.toggle(a)},b.expand=function(){a.isAnimating||a.isDisabled||a.accordionCtrl.expand(a)},b.collapse=function(){a.isAnimating||a.isDisabled||a.accordionCtrl.collapse(a)},b.focusPane=function(){a.isFocused=!0},b.blurPane=function(){a.isFocused=!1},a.internalControl={toggle:b.toggle,expand:b.expand,collapse:b.collapse,isExpanded:b.isExpanded}}a.module("vAccordion.config",[]).constant("accordionConfig",{states:{expanded:"is-expanded"}}),a.module("vAccordion.directives",[]),a.module("vAccordion",["vAccordion.config","vAccordion.directives"]),a.module("vAccordion.directives").directive("vAccordion",b),b.$inject=["$timeout"],c.$inject=["$scope"],a.module("vAccordion.directives").directive("vPaneContent",d),a.module("vAccordion.directives").directive("vPaneHeader",e),a.module("vAccordion.directives").directive("vPane",f),f.$inject=["$timeout","$animate","accordionConfig"],g.$inject=["$scope"]}(angular);
